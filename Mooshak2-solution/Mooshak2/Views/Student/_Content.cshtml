@using Microsoft.AspNet.Identity
@model Mooshak2.Models.AssignmentViewModel

@Scripts.Render("~/Scripts/sortable.min.js")
<link rel="stylesheet" href="~/Content/sortable-theme-minimal.css"/>

<div id="maincontent">
<h2>@Model.Name</h2>
	<div class="container">
		<div class="row">
			<div class="col-md-4">
				@using (Ajax.BeginForm("SubmitForm", "Student", new AjaxOptions() { UpdateTargetId = "maincontent", InsertionMode = InsertionMode.Replace, HttpMethod = "POST" }, new { enctype = "multipart/form-data" }))
				{
					@Html.AntiForgeryToken()
					@Html.Hidden("Id", Model.Id)

					<div class="formgroup col-md-10">
						<input type="file" id="file" name="file" class="btn btn-file btn-default"/>
					</div>
					<div class="formgroup col-md-10 h2-custom">
						<input type="submit" class="btn btn-default"/>
					</div>
				}
			</div>
			<div class="submissionTable">
				<div class="col-md-7 custom-height">
					<table class="table table-hover table-responsive sortable-theme-minimal " data-sortable>
						<thead>
							<tr>
								<th>#</th>
								<th>Time</th>
								<th>User</th>
								<th>Result</th>
								<th>Grade</th>
								<th>Get Submission</th>
							</tr>
						</thead>
						<tbody>
							@if (Model.Submissions.Count == 0)
							{
								<tr>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
							}
							else
							{
								foreach (var item in Model.Submissions)
								{
									if (item.TestFailed == 0)
									{
										<tr class="success">
											<td>@Ajax.ActionLink(item.Id.ToString(), "InputOutputRender", "Student", new { submissionId = item.Id, milestoneId = item.MilestoneId } , new AjaxOptions() { UpdateTargetId = "table", InsertionMode = InsertionMode.Replace })</td>
											<td>@item.SubmitDate.ToString("yyyy-MM-dd hh:mm:ss.fff")</td>
											<td>@item.UserName</td>
											<td>Accepted</td>
											<td>@Html.ActionLink("Download", "Download", new { submissionId = item.Id })</td>@*Hér þarf action link sem downloadar submissioninu*@
										</tr>
									}
									else
									{
										<tr class="danger">
											<td>@Ajax.ActionLink(item.Id.ToString(), "InputOutputRender", "Student", new { submissionId = item.Id, milestoneId = item.MilestoneId }, new AjaxOptions() { UpdateTargetId = "table", InsertionMode = InsertionMode.Replace })</td>
											<td>@item.SubmitDate.ToString("yyyy-MM-dd hh:mm:ss.fff")</td>
											<td>@item.UserName</td>
											<td>Failed</td>
											<td>@Html.ActionLink("Download","Download",new {submissionId = item.Id})</td>@*Hér þarf action link sem downloadar submissioninu*@
										</tr>
									}
								}
							}
						</tbody>
					</table>
					</div>

				<div class="container">
					<div class="inputlists">
						<div class="yourInputs col-md-10 custom-height2" id="table">
							<table class="table table-striped">
								<thead>
								<tr>
									<th>Input</th>
									<th>Your Output</th>
									<th>Expected Output</th>
								</tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>